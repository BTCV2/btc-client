<form [formGroup] = "subjectForm" class="row">
  <mat-form-field class="col s6 m4">
    <mat-select  formControlName="subject" placeholder="Select Subject" (change)="toggleSyllabusTable()">
      <mat-option value="physics">physics</mat-option>
      <mat-option value="maths">maths</mat-option>
      <mat-option value="chemistry">chemistry</mat-option>
      <mat-option value="science">science</mat-option>
      <mat-option value="social">social</mat-option>
    </mat-select>
    <mat-error>This Field is required.</mat-error>
  </mat-form-field>
</form>
<div *ngIf="(role==='student') && showSyllabusTable">
  <ngx-datatable
    [rows]="datarows"
    class="material"
    [columnMode]="'force'"
    [headerHeight]="50"
    [footerHeight]="50"
    [rowHeight]="'auto'"
    [reorderable]="reorderable"
    [columns]="marks">
  </ngx-datatable>
</div>
<div *ngIf="role==='admin'  && showSyllabusTable ">
  <ngx-datatable
    [rows]="datarows"
    class="material"
    [columnMode]="'force'"
    [headerHeight]="50"
    [footerHeight]="50"
    [rowHeight]="'auto'"
    [reorderable]="reorderable">
    <ngx-datatable-column name={{mark}} *ngFor="let mark of marksdemo">
      <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="datarows" let-row="row">
            <span
              *ngIf="!editing[rowIndex + 'Lessons'] && mark !=='Lessons'"
              title="Double click to edit"
              (dblclick)="editing[rowIndex + 'Lessons'] = true">
              {{datarows[rowIndex][mark]}}
            </span>
        <form [formGroup]="formGroup">
          <span *ngIf=" mark ==='Lessons'">
            {{datarows[rowIndex][mark]}}
          </span>
          <mat-form-field *ngIf="editing[rowIndex+ 'Lessons'] && mark !== 'edit' && mark !=='Lessons'">
            <mat-select
              (blur)="updateValue($event, mark , rowIndex)"
              formControlName="completeStatus"
              [value]="datarows[rowIndex][mark]">
              <mat-option value="INCOMPLETE">
                INCOMPLETE
              </mat-option>
              <mat-option value="COMPLETE">
                COMPLETE
              </mat-option>
            </mat-select>
          </mat-form-field>
        </form>

        <!--<mat-form-field>
          <mat-select
                      (blur)="updateValue($event, 'lessons', rowIndex)"
                      *ngIf="editing[rowIndex+ '-Lessons'] && mark !== 'edit' && mark !=='Lessons'"
                      type="text"
                      [value]="datarows[rowIndex][mark]">
            <mat-option value="INCOMPLETE">
              INCOMPLETE
            </mat-option>
            <mat-option value="COMPLETE">
              COMPLETE
            </mat-option>
          </mat-select>
        </mat-form-field>-->


        <!--<select
          autofocus
          (blur)="updateValue($event, 'lessons', rowIndex)"
          *ngIf="editing[rowIndex+ '-Lessons'] && mark !== 'edit' && mark !=='Lessons'"
          type="text"
          [value]="datarows[rowIndex][mark]"
        >
          <option value="INCOMPLETE">
            INCOMPLETE
          </option>
          <option value="COMPLETE">
            COMPLETE
          </option>
        </select>-->
        <button mat-raised-button color="accent" *ngIf="mark === 'edit'" (click)="updateValue($event, mark, rowIndex)"> SAVE</button>
      </ng-template>
    </ngx-datatable-column>
  </ngx-datatable>
</div>



